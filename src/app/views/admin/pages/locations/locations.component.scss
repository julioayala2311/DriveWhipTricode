// Header actions styling
.ride-share-header {
	h4 { font-weight:600; letter-spacing:.3px; overflow-wrap:anywhere; }
}

/* Enhanced location select */
.dw-location-picker {
	position: relative;
	min-width: 280px;
	display: inline-flex;
	align-items: center;
	gap: .35rem;
	background: var(--bs-body-bg);
	border: 1px solid var(--bs-border-color, rgba(0,0,0,.15));
	border-radius: .9rem;
	transition: border-color .25s ease, box-shadow .25s ease, background .25s ease;
	box-shadow: 0 1px 2px rgba(0,0,0,.06), 0 0 0 1px rgba(0,0,0,.04) inset;
	padding-right: .25rem;
}
.dw-location-picker:hover:not(.is-disabled) {
	border-color: rgba(var(--bs-primary-rgb,13,110,253), .55);
	background: linear-gradient(180deg, rgba(var(--bs-primary-rgb,13,110,253),.045) 0%, rgba(var(--bs-primary-rgb,13,110,253),0) 90%);
}
.dw-location-picker.open,
.dw-location-picker:focus-within {
	border-color: var(--bs-primary, #0d6efd);
	box-shadow: 0 0 0 3px rgba(var(--bs-primary-rgb,13,110,253), .25);
}
.dw-location-picker.is-disabled { opacity:.7; cursor:not-allowed; }
.dw-location-picker .loading-indicator {
	right:.85rem; top:50%; transform:translateY(-50%);
}
@media (max-width: 576px) {
	.dw-location-picker { min-width: 210px; }
}

.dw-location-display {
	display:flex;
	align-items:center;
	gap:.6rem;
	padding:.65rem .75rem .65rem 1rem;
	background:transparent;
	font: inherit;
	color: inherit;
	text-align:left;
	border-radius:.85rem;
	min-height:56px;
	min-width:0;
	flex:1 1 auto;
}
.dw-location-display__icon {
	font-size:1rem;
	color: var(--bs-primary,#0d6efd);
	opacity:.85;
	flex-shrink:0;
}
.dw-location-display__text {
	display:flex;
	flex-direction:column;
	gap:.15rem;
	min-width:0;
}
.dw-location-display__title {
	font-weight:600;
	font-size:1.05rem;
	line-height:1.2;
	letter-spacing:.1px;
	overflow:hidden;
	text-overflow:ellipsis;
}
.dw-location-display__meta {
	font-size:.72rem;
	color: var(--bs-secondary-color, rgba(0,0,0,.6));
	letter-spacing:.25px;
	overflow:hidden;
	text-overflow:ellipsis;
	white-space:nowrap;
}

.dw-status-dot {
	display:inline-block;
	width:10px;
	height:10px;
	border-radius:50%;
	background: rgba(0,0,0,.2);
	box-shadow:0 0 0 2px transparent;
}
.dw-status-dot.is-active {
	background: rgba(var(--bs-success-rgb,25,135,84),1);
	box-shadow:0 0 0 2px rgba(var(--bs-success-rgb,25,135,84),.25);
}
.dw-location-display .dw-status-dot { flex-shrink:0; }

.dw-location-trigger {
	width:42px;
	height:42px;
	border-radius:50%;
	border:none;
	background: rgba(15,23,42,.06);
	display:inline-flex;
	align-items:center;
	justify-content:center;
	color: var(--bs-secondary-color, rgba(0,0,0,.6));
	transition: background .2s ease, color .2s ease, transform .2s ease;
	margin-right:.35rem;
	flex-shrink:0;
}
.dw-location-picker.open .dw-location-trigger {
	background: var(--bs-primary,#0d6efd);
	color:#fff;
	transform: rotate(180deg);
}
.dw-location-trigger:focus-visible {
	outline:2px solid var(--bs-primary,#0d6efd);
	outline-offset:2px;
}
.dw-location-trigger:disabled { opacity:.6; cursor:not-allowed; }

.dw-location-menu {
	width:360px;
	max-height:360px;
	padding: .75rem;
	border-radius:1rem;
	border:1px solid var(--bs-border-color, rgba(0,0,0,.12));
	box-shadow:0 18px 48px -20px rgba(15,23,42,.45);
	background: var(--bs-body-bg);
	overflow-y:auto;
}
@media (max-width: 576px) {
	.dw-location-menu { width: min(320px, 88vw); }
}
.dw-location-menu__hint {
	font-size:.7rem;

	letter-spacing:.35px;
	text-transform:uppercase;
	color: var(--bs-secondary-color, rgba(0,0,0,.55));
	margin-bottom:.75rem;
}
.dw-location-group:not(:first-child) { margin-top:.75rem; }
.dw-location-group__label {
	font-size:.68rem;
	text-transform:uppercase;
	letter-spacing:.4px;
	color: var(--bs-secondary-color, rgba(0,0,0,.55));
	margin-bottom:.35rem;
}
.dw-location-option {
	display:flex;
	align-items:flex-start;
	gap:.65rem;
	width:100%;
	padding:.6rem .75rem;
	background:transparent;
	border:none;
	border-radius:.75rem;
	text-align:left;
	color: inherit;
	position:relative;
	transition: background .2s ease, box-shadow .2s ease;
}
.dw-location-option .dw-status-dot { margin-top:.35rem; }
.dw-location-option:hover {
	background: rgba(var(--bs-primary-rgb,13,110,253),.08);
}
.dw-location-option.is-active {
	background: rgba(var(--bs-primary-rgb,13,110,253),.16);
	box-shadow: inset 0 0 0 1px rgba(var(--bs-primary-rgb,13,110,253),.35);
}
.dw-location-option:focus-visible {
	outline:2px solid var(--bs-primary,#0d6efd);
	outline-offset:2px;
}
.dw-location-option__body {
	display:flex;
	flex-direction:column;
	gap:.1rem;
	min-width:0;
}
.option-title {
	font-size:.85rem;
	color: var(--bs-body-color);
}
.option-subtitle {
	font-size:.72rem;
	color: var(--bs-secondary-color, rgba(0,0,0,.6));
}
.option-meta {
	margin-left:auto;
	font-size:.72rem;
	color: var(--bs-secondary-color, rgba(0,0,0,.55));
	font-weight:500;
}

body.dark .dw-location-picker {
	background:#252b32;
	border-color: rgba(255,255,255,.16);
	box-shadow: 0 1px 2px rgba(0,0,0,.4), 0 0 0 1px rgba(255,255,255,.05) inset;
}
body.dark .dw-location-picker:hover:not(.is-disabled) {
	background: linear-gradient(180deg, rgba(var(--bs-primary-rgb,13,110,253),.18) 0%, rgba(var(--bs-primary-rgb,13,110,253),.05) 90%);
}
body.dark .dw-location-display__meta,
body.dark .dw-location-menu__hint,
body.dark .dw-location-group__label,
body.dark .option-subtitle,
body.dark .option-meta {
	color: rgba(255,255,255,.65);
}
body.dark .dw-location-display__icon {
	color: rgba(var(--bs-primary-rgb,13,110,253),.9);
	opacity:1;
}
body.dark .dw-location-menu {
	background:#252b32;
	border-color: rgba(255,255,255,.12);
	box-shadow:0 18px 48px -20px rgba(0,0,0,.85);
}
body.dark .dw-location-option:hover {
	background: rgba(var(--bs-primary-rgb,13,110,253),.22);
}
body.dark .dw-location-option.is-active {
	background: rgba(var(--bs-primary-rgb,13,110,253),.28);
	box-shadow: inset 0 0 0 1px rgba(var(--bs-primary-rgb,13,110,253),.45);
}

/* High contrast / reduced motion accessibility adjustments */
@media (prefers-reduced-motion: reduce) {
	.dw-location-option,
	.dw-location-display,
	.dw-location-trigger { transition:none; }
}

// Carousel styles
.carousel-wrapper {
	position: relative;
	overflow: visible; /* allow vertical halo */
}

.carousel-viewport {
	width:100%;
	overflow:hidden; /* prevent scrollbars while keeping slide clean */
	padding: 16px 12px; /* extra vertical room so halo effects remain visible */
	-ms-overflow-style: none; /* hide scrollbar in IE */
	scrollbar-width: none; /* hide scrollbar in Firefox */
}
.carousel-viewport::-webkit-scrollbar { display:none; }

.carousel-track {
	gap: 0
	1rem;
	width: 100%;
	will-change: transform;
}

.carousel-track.animating { will-change: transform; }

.status-card {
	flex: 0 0 calc((100% - 7rem)/7);
	max-width: calc((100% - 7rem)/7);
	min-width: 0; // flex overflow fix
	background: var(--bs-body-bg);
	border:1px solid transparent; /* avoid jump on activation */
	border-radius: .75rem;
	padding: .85rem .9rem .9rem;
	margin-block:4px; /* extra breathing space for pseudo-elements */
	/* first shadow layer emulates border, second gives subtle elevation */
	box-shadow: 0 0 0 1px var(--bs-border-color, rgba(0,0,0,.12)), 0 1px 2px rgba(0,0,0,.05);
	position: relative;
	z-index:0;
	isolation:isolate; /* ensure pseudo-elements render above this card */
	display:flex;
	flex-direction:column;
	justify-content:flex-start;
	transition: box-shadow .3s ease, background .3s ease;
}
.status-card:hover {
	box-shadow: 0 0 0 1px rgba(var(--bs-primary-rgb,13,110,253), .35), 0 4px 16px -6px rgba(0,0,0,.18);
}
.status-card.active {
	/* highlight without altering physical border */
	box-shadow: 0 0 0 1px var(--bs-primary,#0d6efd), 0 6px 20px -8px rgba(0,0,0,.35);
	transition: box-shadow .45s cubic-bezier(.16,.84,.44,1), background .35s ease;
	z-index:2;
}

/* Refined selection ring to avoid distorted border when track is transformed */

.status-card.active::after {
	content: '';
	position: absolute;
	inset: -4px; /* expand ring so it is not clipped */
	border: 2px solid rgba(var(--bs-primary-rgb,13,110,253), .55);
	border-radius: calc(.75rem + 4px);
	pointer-events: none;
	box-shadow: 0 0 0 3px rgba(var(--bs-primary-rgb,13,110,253), .18);
	animation: ringFade .9s ease-out forwards;
	z-index:1;
}

/* Avoid double outline (focus + active ring) */
.status-card.active:focus-within { outline: none; }
.status-card.active::before {
	content:'';
	position:absolute;
	inset:-12px; /* larger halo outside card crop area */
	border-radius:inherit;
	background: radial-gradient(circle at center, rgba(var(--bs-primary-rgb,13,110,253),.35) 0%, rgba(var(--bs-primary-rgb,13,110,253),0) 70%);
	opacity:.6;
	transform: scale(.85);
	filter: blur(2px);
	animation: pulseHalo 1.05s cubic-bezier(.25,.65,.35,1) forwards;
	pointer-events:none;
	z-index:-1; /* behind content but within card */
}

@keyframes pulseHalo {
	0% { opacity:.0; transform: scale(.6); }
	20% { opacity:.55; }
	60% { opacity:.35; }
	100% { opacity:0; transform: scale(1.15); }
}

@keyframes ringFade {
	0% { opacity:0; transform: scale(.96); }
	15% { opacity:1; }
	100% { opacity:1; transform: scale(1); }
}

@media (prefers-reduced-motion: reduce) {
	.status-card.active::before, .status-card.active::after { animation:none; }
}
.status-card { cursor:pointer; }
.status-card:focus-within { outline:2px solid var(--bs-primary,#0d6efd); outline-offset:2px; }

.status-card .icon-box {
	width: 30px; height:30px;
	border-radius:.65rem;
	background: linear-gradient(135deg, rgba(var(--bs-primary-rgb,13,110,253),.12) 0%, rgba(var(--bs-primary-rgb,13,110,253),.04) 100%);
	display:flex; align-items:center; justify-content:center;
	color: var(--bs-primary,#0d6efd);
	font-size:15px;
}

.status-text { font-size:.9rem; overflow-wrap:anywhere; }
.status-block { line-height:1.15; min-width:0; }
.sub-status { font-size:.72rem; margin-top:.1rem; color: var(--bs-secondary-color, rgba(0,0,0,.55)); font-weight:500; letter-spacing:.3px; overflow-wrap:anywhere; }
.meta { opacity:.85; }

// Responsive sizing based on perView logic (1/2/3/4/6/8)
// We approximate widths so 8 fit on >=1400px, etc.
.carousel-track { flex-wrap: nowrap; }

@media (min-width: 1400px) { .status-card { flex: 0 0 calc((100% - 7rem)/7); max-width: calc((100% - 7rem)/7); } } /* 7 */
@media (min-width: 1200px) and (max-width:1399.98px) { .status-card { flex: 0 0 calc((100% - 5rem)/5); max-width: calc((100% - 5rem)/5); } } /* 5 */
@media (min-width: 992px) and (max-width:1199.98px) { .status-card { flex: 0 0 calc((100% - 3rem)/5); max-width: calc((100% - 3rem)/5); } } /* 5 */
@media (min-width: 768px) and (max-width:991.98px) { .status-card { flex: 0 0 calc((100% - 2rem)/4); max-width: calc((100% - 2rem)/4); } } /* 3 */
@media (min-width: 576px) and (max-width:767.98px) { .status-card { flex: 0 0 calc((100% - 1rem)/2); max-width: calc((100% - 1rem)/2); } } /* 2 */
@media (max-width:575.98px) { .status-card { flex: 0 0 50%; max-width: 50%; } } /* 1 */

// Arrow buttons spacing
.carousel-wrapper .btn-outline-secondary { line-height:1; display:inline-flex; align-items:center; justify-content:center; }

// Lateral nav buttons
.carousel-nav {
	position:absolute;
	top:40%;
	transform: translateY(-40%);
	background: var(--bs-body-bg);
	border:1px solid var(--bs-border-color, rgba(0,0,0,.15));
	width: 30px; height:30px;
	display:flex; align-items:center; justify-content:center;
	border-radius:50%;
	box-shadow:0 2px 6px rgba(0,0,0,.12);
	color: var(--bs-body-color);
	transition: background .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease;
	z-index:2;
}
.carousel-nav.prev { left:.35rem; }
.carousel-nav.next { right:.35rem; }
.carousel-nav:hover:not(:disabled) {
	background: var(--bs-primary,#0d6efd);
	color:#fff;
	border-color: var(--bs-primary,#0d6efd);
	box-shadow:0 4px 14px -2px rgba(var(--bs-primary-rgb,13,110,253), .45);
}
.carousel-nav:disabled { opacity:.4; cursor:not-allowed; }
.carousel-nav:focus-visible { outline:2px solid var(--bs-primary,#0d6efd); outline-offset:2px; }

@media (max-width: 576px) {
	.carousel-nav { width:34px; height:34px; }
	.carousel-nav.prev { left:.15rem; }
	.carousel-nav.next { right:.15rem; }
}

// Reduced motion preference
@media (prefers-reduced-motion: reduce) {
	.carousel-track { transition:none; }
}

/* Empty state inspired by workflow editor */
.empty-state { position: relative; }
.locations-empty-state { max-width: 520px; }
.empty-icon-wrapper {
	width: 86px;
	height: 86px;
	border-radius: 24px;
	position: relative;
}
.empty-icon-wrapper .gradient-ring {
	position: absolute;
	inset: 0;
	border-radius: 24px;
	background: linear-gradient(135deg, rgba(var(--bs-primary-rgb,13,110,253),.18), rgba(var(--bs-primary-rgb,13,110,253),.05));
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 2px 6px -2px rgba(0,0,0,.15), 0 4px 18px -6px rgba(0,0,0,.25);
	backdrop-filter: blur(2px);
}
.empty-main-icon {
	font-size: 34px;
	color: var(--bs-primary,#0d6efd);
	opacity: .85;
}
.empty-title {
	font-weight: 600;
	letter-spacing: .25px;
	font-size: 1.05rem;
}
.empty-subtitle {
	font-size: .8rem;
	color: var(--bs-secondary-color,rgba(0,0,0,.58));
	letter-spacing: .25px;
	margin: 0 auto;
	max-width: 420px;
}
.empty-hint {
	font-size: .7rem;
	letter-spacing: .25px;
}

.dw-location-picker {
    background: transparent;
    border: 1px solid transparent;
    border-radius: 0.9rem;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0), 0 0 0 1px rgba(0, 0, 0, 0) inset;
}

.dw-location-picker:hover {
    background: transparent!important;
    border: 1px solid transparent!important;
    border-radius: 0.9rem!important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0), 0 0 0 1px rgba(0, 0, 0, 0) inset!important;
}