<div class="page-header d-flex align-items-center justify-content-between mb-3">
  <div>
    <h2 class="page-title mb-1">User Roles</h2>
    <small class="text-muted">Manage role definitions</small>
  </div>
  <div class="d-flex gap-2">
    <button
      class="btn btn-sm btn-ghost"
      (click)="loadRoles()"
      [disabled]="loading()"
    >
      Refresh
    </button>
    <button
      class="btn btn-sm btn-primary"
      (click)="onCreate()"
      [disabled]="loading()"
    >
      Create Role
    </button>
  </div>
</div>

<dw-role-dialog
  *ngIf="showDialog()"
  [mode]="dialogMode()"
  [record]="editingRecord()"
  [existingRoleNames]="roleNames()"
  [saving]="saving()"
  (closed)="closeDialog()"
  (saved)="handleDialogSave($event)"
></dw-role-dialog>

<div *ngIf="error()" class="alert alert-danger py-2 px-3 mb-3">
  {{ error() }}
</div>

<div *ngIf="loading()" class="p-3">Loading roles...</div>
<ag-grid-angular
  *ngIf="!loading()"
  class="ag-theme-quartz dw-grid-theme"
  style="width: 100%; height: 440px"
  [rowData]="roles()"
  [columnDefs]="columnDefs"
  [defaultColDef]="defaultColDef"
  rowSelection="single"
  [suppressRowClickSelection]="false"
  [pagination]="true"
  [paginationPageSize]="pageSize"
  [paginationPageSizeSelector]="pageSizeOptions"
  (gridReady)="onGridReady($event)"
  (cellClicked)="onCellClicked($event)"
>
</ag-grid-angular>
