/* Permission buttons (icon-based)
   NOTE: Content is created dynamically inside ag-Grid. We pierce view encapsulation
   so these styles apply to generated elements. */
:host ::ng-deep .permission-buttons {
  display: inline-flex;
  align-items: center;
  gap: 12px;
}

:host ::ng-deep .perm-btn-group {
  display: inline-flex;
  gap: 8px;
}

:host ::ng-deep .perm-btn-group .btn + .btn {
  margin-left: 0;
}

:host ::ng-deep .perm-btn-group .perm-btn {
  position: relative;
  width: 30px;
  height: 30px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  border-radius: 50px;
  border: 0px;
  background: rgba(15, 23, 42, .06);
  color: rgba(30, 41, 59, .72);
  transition: transform .18s ease, background .18s ease, color .18s ease,
    border-color .18s ease, box-shadow .18s ease;
  box-shadow: 0 1px 2px rgba(15, 23, 42, .12), 0 0 0 1px rgba(255, 255, 255, .6) inset;
  font-size: 0;
}

:host ::ng-deep .perm-btn-group .perm-btn .perm-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  font-size: 10px;
  color: white;
  line-height: 1;
  transition: transform .18s ease, opacity .18s ease;
}

:host ::ng-deep .perm-btn-group .perm-btn .perm-icon path,
:host ::ng-deep .perm-btn-group .perm-btn .perm-icon circle,
:host ::ng-deep .perm-btn-group .perm-btn .perm-icon line,
:host ::ng-deep .perm-btn-group .perm-btn .perm-icon polyline {
  stroke: currentColor;
  fill: none;
}

:host ::ng-deep .perm-btn-group .perm-btn .perm-icon.perm-icon-inactive {
  opacity: .55;
  transform: scale(.92);
}

:host ::ng-deep .perm-btn-group .perm-btn .perm-icon.perm-icon-active {
  opacity: 1;
  transform: scale(1.08);
}

/* OFF state */
:host ::ng-deep .perm-btn-group .perm-btn.perm-off {
  background: rgba(148, 163, 184, .08);
  border-color: rgba(148, 163, 184, .3);
  color: rgba(71, 85, 105, .9);
  box-shadow: 0 1px 2px rgba(15, 23, 42, .08), 0 0 0 1px rgba(255, 255, 255, .6) inset;
}

/* ON state base */
:host ::ng-deep .perm-btn-group .perm-btn.perm-on {
  color: #fff;
  box-shadow: 0 10px 18px rgba(15, 23, 42, .2), 0 0 0 1px rgba(255, 255, 255, .2) inset;
}

:host ::ng-deep .perm-btn-group .perm-btn.perm-on::after {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: inherit;
  box-shadow: 0 0 0 1px rgba(255, 255, 255, .3);
  opacity: .75;
  pointer-events: none;
}

/* Saturated backgrounds for ON variants */
:host ::ng-deep .perm-btn-group .perm-btn.perm-on.perm-success {
  background: linear-gradient(140deg, rgba(16, 185, 129, .78), rgba(4, 120, 87, .95));
  border-color: rgba(4, 120, 87, .9)!important;
}

:host ::ng-deep .perm-btn-group .perm-btn.perm-on.perm-info {
  background: linear-gradient(140deg, rgba(59, 130, 246, .8), rgba(29, 78, 216, .95));
  border-color: rgba(29, 78, 216, .9);
}

:host ::ng-deep .perm-btn-group .perm-btn.perm-on.perm-warning {
  background: linear-gradient(140deg, rgba(251, 191, 36, .82), rgba(217, 119, 6, .95));
  border-color: rgba(217, 119, 6, .9);
}

:host ::ng-deep .perm-btn-group .perm-btn.perm-on.perm-danger {
  background: linear-gradient(140deg, rgba(248, 113, 113, .82), rgba(185, 28, 28, .95));
  border-color: rgba(185, 28, 28, .92);
}

:host ::ng-deep .perm-btn-group .perm-btn:hover:not([disabled]) {
  transform: translateY(-2px);
  box-shadow: 0 16px 24px rgba(15, 23, 42, .2), 0 0 0 1px rgba(255, 255, 255, .25) inset;
}

:host ::ng-deep .perm-btn-group .perm-btn:focus-visible {
  outline: 2px solid var(--bs-primary, #0d6efd);
  outline-offset: 3px;
}

:host ::ng-deep .perm-btn-group .perm-btn[disabled],
:host ::ng-deep .perm-btn-group .perm-btn.perm-disabled {
  cursor: not-allowed;
  opacity: .45;
  box-shadow: none;
}

:host ::ng-deep .perm-total.badge.perm-total-all {
  background: rgba(16,185,129,.25)!important; /* success tint */
  color: #34d399!important;
  border-color: rgba(16,185,129,.45);
}

:host ::ng-deep .perm-total.badge {
  font-size: 11px;
  padding: 4px 6px;
  background: var(--bs-secondary)!important;
  color: white!important;
  border: 1px solid rgba(148,163,184,.35);
  font-weight: 600;
  letter-spacing: .5px;
  min-width: 44px;
  text-align: center;
}
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  white-space: nowrap;
  border: 0;
}
.roles-wrapper {
  .ag-center-header .ag-header-cell-label { justify-content: center; }
  .text-center { text-align: center; }
}

h5, h6 { font-weight: 600; }

/* Chip to display parent menu inside the Route column */
.routes-grid .parent-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 999px;
  background: rgba(13, 110, 253, 0.12);
  color: rgba(13, 110, 253, 1);
  border: 1px solid rgba(13, 110, 253, 0.28);
}

.routes-grid .route-label {
  font-weight: 600;
}

/* Two-line style now relies on Bootstrap utility classes (fw-semibold, text-secondary, small, lh-sm, py-1)
   so the previous custom selectors are removed. */

/* Permissions dot matrix */
.routes-grid .permission-dots {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.routes-grid .permission-dots .dots {
  display: inline-flex;
  gap: 8px;
}

.routes-grid .permission-dots .perm-dot {
  --size: 14px;
  width: var(--size);
  height: var(--size);
  border-radius: 50%;
  border: 2px solid rgba(148,163,184,.5);
  background: transparent;
  padding: 0;
  cursor: pointer;
  position: relative;
  transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
}

.routes-grid .permission-dots .perm-dot[aria-pressed='true'] {
  background: var(--bs-success, #198754);
  border-color: var(--bs-success, #198754);
  box-shadow: 0 0 0 3px rgba(25,135,84,.25);
}

.routes-grid .permission-dots .perm-dot[aria-pressed='false'] {
  background: rgba(148,163,184,.12);
  border-color: rgba(148,163,184,.45);
}

.routes-grid .permission-dots .perm-dot:hover {
  box-shadow: 0 0 0 3px rgba(148,163,184,.25);
}

.routes-grid .permission-dots .perm-dot[aria-pressed='true']:hover {
  box-shadow: 0 0 0 3px rgba(25,135,84,.35);
}

.routes-grid .permission-dots .perm-dot:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(13,110,253,.45);
}

.routes-grid .permission-dots .perm-dot[disabled] {
  opacity: .5;
  cursor: not-allowed;
}

.routes-grid .permission-dots .perm-count {
  font-size: 11px;
  color: rgba(226,232,240,.7);
}
